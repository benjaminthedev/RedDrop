jQuery(document).ready(function(){window._asl_map_customize||(window._asl_map_customize=null);var asl_locator=function(){};if(window.asl_locator=asl_locator,window.google&&google.maps){if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");!function(e){"use strict";var t=jQuery.fn.jquery.split(" ")[0].split(".");t[0]<2&&t[1]<9||1==t[0]&&9==t[1]&&t[2]<1||t[0]}(),function(n){"use strict";function r(e){var t=e.attr("data-target");t||(t=(t=e.attr("href"))&&/#[A-Za-z]/.test(t)&&t.replace(/.*(?=#[^\s]*$)/,""));var o=t&&n(t);return o&&o.length?o:e.parent()}function s(a){a&&3===a.which||(n(".adropdown-backdrop").remove(),n(l).each(function(){var e=n(this),t=r(e),o={relatedTarget:this};t.hasClass("open")&&(a&&"click"==a.type&&/input|textarea/i.test(a.target.tagName)&&n.contains(t[0],a.target)||(t.trigger(a=n.Event("hide.bs.adropdown",o)),a.isDefaultPrevented()||(e.attr("aria-expanded","false"),t.removeClass("open").trigger(n.Event("hidden.bs.adropdown",o)))))}))}var l='[data-toggle="adropdown"]',a=function(e){n(e).on("click.bs.adropdown",this.toggle)};a.VERSION="3.3.7",a.prototype.toggle=function(e){var t=n(this);if(!t.is(".disabled, :disabled")){var o=r(t),a=o.hasClass("open");if(s(),!a){"ontouchstart"in document.documentElement&&!o.closest(".navbar-nav").length&&n(document.createElement("div")).addClass("adropdown-backdrop").insertAfter(n(this)).on("click",s);var i={relatedTarget:this};if(o.trigger(e=n.Event("show.bs.adropdown",i)),e.isDefaultPrevented())return;t.trigger("focus").attr("aria-expanded","true"),o.toggleClass("open").trigger(n.Event("shown.bs.adropdown",i))}return!1}},a.prototype.keydown=function(e){if(/(38|40|27|32)/.test(e.which)&&!/input|textarea/i.test(e.target.tagName)){var t=n(this);if(e.preventDefault(),e.stopPropagation(),!t.is(".disabled, :disabled")){var o=r(t),a=o.hasClass("open");if(!a&&27!=e.which||a&&27==e.which)return 27==e.which&&o.find(l).trigger("focus"),t.trigger("click");var i=o.find(".adropdown-menu li:not(.disabled):visible a");if(i.length){var s=i.index(e.target);38==e.which&&0<s&&s--,40==e.which&&s<i.length-1&&s++,~s||(s=0),i.eq(s).trigger("focus")}}}};var e=n.fn.adropdown;n.fn.adropdown=function(o){return this.each(function(){var e=n(this),t=e.data("bs.adropdown");t||e.data("bs.adropdown",t=new a(this)),"string"==typeof o&&t[o].call(e)})},n.fn.adropdown.Constructor=a,n.fn.adropdown.noConflict=function(){return n.fn.adropdown=e,this},n(document).on("click.bs.adropdown.data-api",s).on("click.bs.adropdown.data-api",".adropdown form",function(e){e.stopPropagation()}).on("click.bs.adropdown.data-api",l,a.prototype.toggle).on("keydown.bs.adropdown.data-api",l,a.prototype.keydown).on("keydown.bs.adropdown.data-api",".adropdown-menu",a.prototype.keydown)}(jQuery),function(n){"use strict";function i(e){var t,o=e.attr("data-target")||(t=e.attr("href"))&&t.replace(/.*(?=#[^\s]+$)/,"");return n(o)}function r(a){return this.each(function(){var e=n(this),t=e.data("bs.collapse"),o=n.extend({},l.DEFAULTS,e.data(),"object"==typeof a&&a);!t&&o.toggle&&/show|hide/.test(a)&&(o.toggle=!1),t||e.data("bs.collapse",t=new l(this,o)),"string"==typeof a&&t[a]()})}var l=function(e,t){this.$element=n(e),this.options=n.extend({},l.DEFAULTS,t),this.$trigger=n('[data-toggle="collapse"][href="#'+e.id+'"],[data-toggle="collapse"][data-target="#'+e.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};l.VERSION="3.3.7",l.TRANSITION_DURATION=350,l.DEFAULTS={toggle:!0},l.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},l.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e,t=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(t&&t.length&&((e=t.data("bs.collapse"))&&e.transitioning))){var o=n.Event("show.bs.collapse");if(this.$element.trigger(o),!o.isDefaultPrevented()){t&&t.length&&(r.call(t,"hide"),e||t.data("bs.collapse",null));var a=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[a](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var i=function(){this.$element.removeClass("collapsing").addClass("collapse in")[a](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!n.support.transition)return i.call(this);var s=n.camelCase(["scroll",a].join("-"));this.$element.one("bsTransitionEnd",n.proxy(i,this)).emulateTransitionEnd(l.TRANSITION_DURATION)[a](this.$element[0][s])}}}},l.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=n.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var t=this.dimension();this.$element[t](this.$element[t]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var o=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return n.support.transition?void this.$element[t](0).one("bsTransitionEnd",n.proxy(o,this)).emulateTransitionEnd(l.TRANSITION_DURATION):o.call(this)}}},l.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},l.prototype.getParent=function(){return n(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(n.proxy(function(e,t){var o=n(t);this.addAriaAndCollapsedClass(i(o),o)},this)).end()},l.prototype.addAriaAndCollapsedClass=function(e,t){var o=e.hasClass("in");e.attr("aria-expanded",o),t.toggleClass("collapsed",!o).attr("aria-expanded",o)};var e=n.fn.collapse;n.fn.collapse=r,n.fn.collapse.Constructor=l,n.fn.collapse.noConflict=function(){return n.fn.collapse=e,this},n(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(e){var t=n(this);t.attr("data-target")||e.preventDefault();var o=i(t),a=o.data("bs.collapse")?"toggle":t.data();r.call(o,a)})}(jQuery),function(a){"use strict";a.fn.emulateTransitionEnd=function(e){var t=!1,o=this;a(this).one("bsTransitionEnd",function(){t=!0});return setTimeout(function(){t||a(o).trigger(a.support.transition.end)},e),this},a(function(){a.support.transition=function(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var o in t)if(void 0!==e.style[o])return{end:t[o]};return!1}(),a.support.transition&&(a.event.special.bsTransitionEnd={bindType:a.support.transition.end,delegateType:a.support.transition.end,handle:function(e){return a(e.target).is(this)?e.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),InfoBox.prototype=new google.maps.OverlayView,InfoBox.prototype.createInfoBoxDiv_=function(){var e,t,o,a=this,i=function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()};if(!this.div_){if(this.div_=document.createElement("div"),this.setBoxStyle_(),void 0===this.content_.nodeType?this.div_.innerHTML=this.getCloseBoxImg_()+this.content_:(this.div_.innerHTML=this.getCloseBoxImg_(),this.div_.appendChild(this.content_)),this.getPanes()[this.pane_].appendChild(this.div_),this.addClickHandler_(),this.div_.style.width?this.fixedWidthSet_=!0:0!==this.maxWidth_&&this.div_.offsetWidth>this.maxWidth_?(this.div_.style.width=this.maxWidth_,this.div_.style.overflow="auto",this.fixedWidthSet_=!0):(o=this.getBoxWidths_(),this.div_.style.width=this.div_.offsetWidth-o.left-o.right+"px",this.fixedWidthSet_=!1),this.panBox_(this.disableAutoPan_),!this.enableEventPropagation_){for(this.eventListeners_=[],t=["mousedown","mouseover","mouseout","mouseup","click","dblclick","touchstart","touchend","touchmove"],e=0;e<t.length;e++)this.eventListeners_.push(google.maps.event.addDomListener(this.div_,t[e],i));this.eventListeners_.push(google.maps.event.addDomListener(this.div_,"mouseover",function(e){this.style.cursor="default"}))}this.contextListener_=google.maps.event.addDomListener(this.div_,"contextmenu",function(e){e.returnValue=!1,e.preventDefault&&e.preventDefault(),a.enableEventPropagation_||i(e)}),google.maps.event.trigger(this,"domready")}},InfoBox.prototype.getCloseBoxImg_=function(){var e="";return""!==this.closeBoxURL_&&(e="<img",e+=" src='"+this.closeBoxURL_+"'",e+=" align=right",e+=" style='",e+=" position: relative;",e+=" cursor: pointer;",e+=" margin: "+this.closeBoxMargin_+";",e+="'>"),e},InfoBox.prototype.addClickHandler_=function(){var e;""!==this.closeBoxURL_?(e=this.div_.firstChild,this.closeListener_=google.maps.event.addDomListener(e,"click",this.getCloseClickHandler_())):this.closeListener_=null},InfoBox.prototype.getCloseClickHandler_=function(){var t=this;return function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),google.maps.event.trigger(t,"closeclick"),t.close()}},InfoBox.prototype.panBox_=function(e){var t,o=0,a=0;if(!e&&(t=this.getMap())instanceof google.maps.Map){t.getBounds().contains(this.position_)||t.setCenter(this.position_),t.getBounds();var i=t.getDiv(),s=i.offsetWidth,n=i.offsetHeight,r=this.pixelOffset_.width,l=this.pixelOffset_.height,c=this.div_.offsetWidth,_=this.div_.offsetHeight,d=this.infoBoxClearance_.width,p=this.infoBoxClearance_.height,g=this.getProjection().fromLatLngToContainerPixel(this.position_);if(g.x<-r+d?o=g.x+r-d:g.x+c+r+d>s&&(o=g.x+c+r+d-s),this.alignBottom_?g.y<-l+p+_?a=g.y+l-p-_:g.y+l+p>n&&(a=g.y+l+p-n):g.y<-l+p?a=g.y+l-p:g.y+_+l+p>n&&(a=g.y+_+l+p-n),0!==o||0!==a){t.getCenter();t.panBy(o,a)}}},InfoBox.prototype.setBoxStyle_=function(){var e,t;if(this.div_){for(e in this.div_.className=this.boxClass_,this.div_.style.cssText="",t=this.boxStyle_)t.hasOwnProperty(e)&&(this.div_.style[e]=t[e]);this.div_.style.WebkitTransform="translateZ(0)",void 0!==this.div_.style.opacity&&""!==this.div_.style.opacity&&(this.div_.style.MsFilter='"progid:DXImageTransform.Microsoft.Alpha(Opacity='+100*this.div_.style.opacity+')"',this.div_.style.filter="alpha(opacity="+100*this.div_.style.opacity+")"),this.div_.style.position="absolute",this.div_.style.visibility="hidden",null!==this.zIndex_&&(this.div_.style.zIndex=this.zIndex_)}},InfoBox.prototype.getBoxWidths_=function(){var e,t={top:0,bottom:0,left:0,right:0},o=this.div_;return document.defaultView&&document.defaultView.getComputedStyle?(e=o.ownerDocument.defaultView.getComputedStyle(o,""))&&(t.top=parseInt(e.borderTopWidth,10)||0,t.bottom=parseInt(e.borderBottomWidth,10)||0,t.left=parseInt(e.borderLeftWidth,10)||0,t.right=parseInt(e.borderRightWidth,10)||0):document.documentElement.currentStyle&&o.currentStyle&&(t.top=parseInt(o.currentStyle.borderTopWidth,10)||0,t.bottom=parseInt(o.currentStyle.borderBottomWidth,10)||0,t.left=parseInt(o.currentStyle.borderLeftWidth,10)||0,t.right=parseInt(o.currentStyle.borderRightWidth,10)||0),t},InfoBox.prototype.onRemove=function(){this.div_&&(this.div_.parentNode.removeChild(this.div_),this.div_=null)},InfoBox.prototype.draw=function(){this.createInfoBoxDiv_();var e=this.getProjection().fromLatLngToDivPixel(this.position_);this.div_.style.left=e.x+this.pixelOffset_.width+"px",this.alignBottom_?this.div_.style.bottom=-(e.y+this.pixelOffset_.height)+"px":this.div_.style.top=e.y+this.pixelOffset_.height+"px",this.isHidden_?this.div_.style.visibility="hidden":this.div_.style.visibility="visible"},InfoBox.prototype.setOptions=function(e){void 0!==e.boxClass&&(this.boxClass_=e.boxClass,this.setBoxStyle_()),void 0!==e.boxStyle&&(this.boxStyle_=e.boxStyle,this.setBoxStyle_()),void 0!==e.content&&this.setContent(e.content),void 0!==e.disableAutoPan&&(this.disableAutoPan_=e.disableAutoPan),void 0!==e.maxWidth&&(this.maxWidth_=e.maxWidth),void 0!==e.pixelOffset&&(this.pixelOffset_=e.pixelOffset),void 0!==e.alignBottom&&(this.alignBottom_=e.alignBottom),void 0!==e.position&&this.setPosition(e.position),void 0!==e.zIndex&&this.setZIndex(e.zIndex),void 0!==e.closeBoxMargin&&(this.closeBoxMargin_=e.closeBoxMargin),void 0!==e.closeBoxURL&&(this.closeBoxURL_=e.closeBoxURL),void 0!==e.infoBoxClearance&&(this.infoBoxClearance_=e.infoBoxClearance),void 0!==e.isHidden&&(this.isHidden_=e.isHidden),void 0!==e.visible&&(this.isHidden_=!e.visible),void 0!==e.enableEventPropagation&&(this.enableEventPropagation_=e.enableEventPropagation),this.div_&&this.draw()},InfoBox.prototype.setContent=function(e){this.content_=e,this.div_&&(this.closeListener_&&(google.maps.event.removeListener(this.closeListener_),this.closeListener_=null),this.fixedWidthSet_||(this.div_.style.width=""),void 0===e.nodeType?this.div_.innerHTML=this.getCloseBoxImg_()+e:(this.div_.innerHTML=this.getCloseBoxImg_(),this.div_.appendChild(e)),this.fixedWidthSet_||(this.div_.style.width=this.div_.offsetWidth+"px",void 0===e.nodeType?this.div_.innerHTML=this.getCloseBoxImg_()+e:(this.div_.innerHTML=this.getCloseBoxImg_(),this.div_.appendChild(e))),this.addClickHandler_()),google.maps.event.trigger(this,"content_changed")},InfoBox.prototype.setPosition=function(e){this.position_=e,this.div_&&this.draw(),google.maps.event.trigger(this,"position_changed")},InfoBox.prototype.setZIndex=function(e){this.zIndex_=e,this.div_&&(this.div_.style.zIndex=e),google.maps.event.trigger(this,"zindex_changed")},InfoBox.prototype.setVisible=function(e){this.isHidden_=!e,this.div_&&(this.div_.style.visibility=this.isHidden_?"hidden":"visible")},InfoBox.prototype.getContent=function(){return this.content_},InfoBox.prototype.getPosition=function(){return this.position_},InfoBox.prototype.getZIndex=function(){return this.zIndex_},InfoBox.prototype.getVisible=function(){return void 0!==this.getMap()&&null!==this.getMap()&&!this.isHidden_},InfoBox.prototype.show=function(){this.isHidden_=!1,this.div_&&(this.div_.style.visibility="visible")},InfoBox.prototype.hide=function(){this.isHidden_=!0,this.div_&&(this.div_.style.visibility="hidden")},InfoBox.prototype.open=function(e,t){var o=this;t&&(this.position_=t.getPosition(),this.moveListener_=google.maps.event.addListener(t,"position_changed",function(){o.setPosition(this.getPosition())})),this.setMap(e),this.div_&&this.panBox_()},InfoBox.prototype.close=function(){var e;if(this.closeListener_&&(google.maps.event.removeListener(this.closeListener_),this.closeListener_=null),this.eventListeners_){for(e=0;e<this.eventListeners_.length;e++)google.maps.event.removeListener(this.eventListeners_[e]);this.eventListeners_=null}this.moveListener_&&(google.maps.event.removeListener(this.moveListener_),this.moveListener_=null),this.contextListener_&&(google.maps.event.removeListener(this.contextListener_),this.contextListener_=null),this.setMap(null)};var asl_drawing={shapes:[],shapes_index:0,current_map:null,loadData:function(e,t){var o=this;for(var a in o.current_map=t,e.shapes)e.shapes[a]&&("polygon"==e.shapes[a].type?o.shapes.push(o.create_polygon.call(o,e.shapes[a].coord,t,e.shapes[a])):"circle"==e.shapes[a].type?o.shapes.push(o.create_circle.call(o,e.shapes[a],t)):"rectangle"==e.shapes[a].type&&o.shapes.push(o.create_rectangle.call(o,e.shapes[a],t)))},create_rectangle:function(e){var t=this.current_map;return new google.maps.Rectangle({strokeColor:e.strokeColor,fillColor:e.color,strokeWeight:1,type:"rectangle",editable:!!asl_drawing.allow_edit&&asl_drawing.allow_edit,map:t,bounds:new google.maps.LatLngBounds(new google.maps.LatLng(e.sw[0],e.sw[1]),new google.maps.LatLng(e.ne[0],e.ne[1]))})},create_circle:function(e,t){t=this.current_map;return new google.maps.Circle({strokeColor:e.strokeColor,fillColor:e.color,type:"circle",strokeWeight:1,map:t,editable:!!asl_drawing.allow_edit&&asl_drawing.allow_edit,center:new google.maps.LatLng(e.center[0],e.center[1]),radius:e.radius})},create_polygon:function(e,t,o){t=this.current_map;var a=[];for(var i in e)a.push({lat:e[i][0],lng:e[i][1]});return new google.maps.Polygon({paths:a,fillColor:o.color,strokeColor:o.strokeColor,strokeWeight:1,editable:!!asl_drawing.allow_edit,type:"polygon",map:t})}};!function(b){b.templates||(b.templates=asl_jQuery.templates);var a=!1;asl_locator.add_prop_search=function(e,r){var t=b(r),o=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace("title"),queryTokenizer:Bloodhound.tokenizers.whitespace,local:e});t.val(""),t.bind("keydown",function(e){13==e.which&&(t.parent().find(".tt-suggestion.tt-cursor")[0]?t.parent().find(".tt-suggestion.tt-cursor").trigger("click"):t.parent().find(".tt-suggestion:first-child").trigger("click"))}),t.on("keyup",function(e){"asl-location-search"==this.id&&!e.target.value&&asl_view._location&&(asl_view._location=null,asl_view.refreshView(),asl_view._panel.stores_changed())}),"0"!=asl_configuration.search_type&&t.next().children().bind("click",function(){t.parent().find(".tt-suggestion:first-child").trigger("click")}),o.initialize(),t.typeahead({hint:!1,highlight:!0,minLength:1},{name:"title",displayKey:"title",source:o.ttAdapter()}),t.on("typeahead:selected",function(e,t,o){if(t.type){var a=new google.maps.LatLngBounds;for(var i in asl_view.data_.stores_)asl_view.data_.stores_.hasOwnProperty(i)&&asl_view.data_.stores_[i].props_[t.type]==t.title&&a.extend(asl_view.data_.stores_[i].getLocation());if(asl_view._location=t.title,"1"==asl_configuration.fit_bound)asl_map.fitBounds(a);else{var s=a.getCenter();asl_map.setCenter(s),asl_map.setZoom(parseInt(asl_configuration.search_zoom))}return asl_view.refreshView(),void r.next().removeClass("hide")}var n=b('.asl-p-cont .sl-item[data-id="'+t.id+'"]');n[0]&&(n.trigger("click").addClass("highlighted"),"1"==asl_configuration.layout?n.parents("li").children(0).trigger("click"):b("#asl-storelocator #asl-list").animate({scrollTop:n.position().top},"fast"))})},asl_locator.save_analytics=function(e,t){var o={action:"asl_search_log",nonce:ASL_REMOTE.nonce};if(t)o.is_search=0,o.store_id=e.id_;else if(o.is_search=1,o.place_id=e.id,o.search_str=e.formatted_address,!b.trim(o.search_str))return;b.ajax({url:ASL_REMOTE.ajax_url,data:o,type:"POST",success:function(e){}})},asl_locator.toRad_=function(e){return e*Math.PI/180},asl_locator.Store=function(e,t,o,a){this.id_=e,this.location_=t,this.categories_=o,this.props_=a||{},this.v_id=a.vendor_id},asl_locator.Store.prototype.setMarker=function(e){this.marker_=e,google.maps.event.trigger(this,"marker_changed",e)},asl_locator.Store.prototype.getMarker=function(){return this.marker_},asl_locator.Store.prototype.getId=function(){return this.id_},asl_locator.Store.prototype.getLocation=function(){return this.location_},asl_locator.Store.prototype.hasCategory=function(e){return-1!=this.categories_.indexOf(e)},asl_locator.Store.prototype.hasAnyCategory=function(e){if(!e.array_.length)return!0;for(var t=e.asList(),o=0,a=t.length;o<a;o++)if(-1!=this.categories_.indexOf(t[o].id_))return!0;return!1},asl_locator.Store.prototype.getDetails=function(){return this.props_},asl_locator.Store.prototype.generateFieldsHTML_=function(e){for(var t=[],o=0,a=e.length;o<a;o++){var i=e[o];this.props_[i]&&(t.push('<div class="'),t.push(i),t.push('">'),t.push(i+": "),t.push(isNaN(this.props_[i])?this.props_[i]:numberWithCommas(this.props_[i])),t.push("</div>"))}return t.join("")},asl_locator.Store.prototype.generateFeaturesHTML_=function(){var e=[];e.push('<ul class="features">');for(var t,o=this.categories_.asList(),a=0;t=o[a];a++)e.push("<li>"),e.push(t.getDisplayName()),e.push("</li>");return e.push("</ul>"),e.join("")},asl_locator.Store.prototype.getStoreContent=function(){if(!this.content_){var e=window.asl_tmpl_list_item?window.asl_tmpl_list_item:b.templates(window.asl_info_list||"#tmpl_list_item");window.asl_tmpl_list_item=e,this.content_=b(e.render(this.props_))}return this.content_},asl_locator.Store.prototype.getcontent_=function(e){var t=window.asl_too_tip_tmpl?window.asl_too_tip_tmpl:b.templates(window.asl_info_box||"#asl_too_tip");return window.asl_too_tip_tmpl=t,e.props_.show_categories=asl_configuration.show_categories,e.props_.URL=asl_configuration.URL,t.render(e.props_)},asl_locator.Store.prototype.getInfoWindowContent=function(e){var t='<div class="infoWindow" id="style_'+(asl_configuration.infobox_layout?asl_configuration.infobox_layout:"1")+'">';return t+=this.getcontent_(this),t+="</div>",this.content_=t,this.content_},asl_locator.Store.infoPanelCache_={},asl_locator.Store.prototype.getInfoPanelItem=function(){var e=asl_locator.Store.infoPanelCache_,t=this.id_;if(!e[t]){var o=this.getStoreContent();e[t]=o[0]}return e[t]},asl_locator.Store.prototype.distanceTo=function(e){var t=this.getLocation(),o=asl_locator.toRad_(t.lat()),a=asl_locator.toRad_(t.lng()),i=asl_locator.toRad_(e.lat()),s=i-o,n=asl_locator.toRad_(e.lng())-a,r=Math.sin(s/2)*Math.sin(s/2)+Math.cos(o)*Math.cos(i)*Math.sin(n/2)*Math.sin(n/2),l=6371*(2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r)));return"Miles"==asl_configuration.distance_unit?.621371*l:l},asl_locator.View=function(e,t,o){this.map_=e,this.data_=t,this.settings_=b.extend({updateOnPan:!0,geolocation:!1,features:new asl_locator.FeatureSet},o),this.init_(),google.maps.event.trigger(this,"load"),this.set("featureFilter",new asl_locator.FeatureSet),asl_configuration.active_marker&&(this.active_marker={m:null,picon:null,icon:new google.maps.MarkerImage(asl_configuration.URL+"public/icon/"+asl_configuration.active_marker,null,null)})},asl_locator.View=asl_locator.View,asl_locator.View.prototype=new google.maps.MVCObject,asl_locator.View.prototype.measure_distance=function(e,t,o,a){var i=this;if("3"==asl_configuration.first_load&&(i.display_list||(b(".asl-p-cont.storelocator-main").removeClass("map-full"),i.display_list=!0)),"4"==asl_configuration.first_load&&(!i.list_shown&&i.display_list&&(b(".asl-p-cont.storelocator-main").removeClass("map-full"),i.list_shown=!0),i.display_list||(i.display_list=!0)),asl_configuration.filter_result){var s={};if(asl_underscore.isArray(a)&&(a=a[0]),a&&a.address_components)for(var n in a.address_components)if(a.address_components.hasOwnProperty(n))if(-1!=a.address_components[n].types.indexOf("sublocality")||-1!=a.address_components[n].types.indexOf("sublocality_level_1")||-1!=a.address_components[n].types.indexOf("locality")||-1!=a.address_components[n].types.indexOf("administrative_area_level_2")){var r=[a.address_components[n].long_name.toLowerCase(),a.address_components[n].short_name.toLowerCase()];s.city=s.city?s.city.concat(r):r}else-1!=a.address_components[n].types.indexOf("administrative_area_level_1")?s.state=[a.address_components[n].long_name.toLowerCase(),a.address_components[n].short_name.toLowerCase()]:-1!=a.address_components[n].types.indexOf("country")?s.country=[a.address_components[n].long_name.toLowerCase(),a.address_components[n].short_name.toUpperCase()]:-1!=a.address_components[n].types.indexOf("postal_code")&&(s.postal_code=[a.address_components[n].long_name.toLowerCase(),a.address_components[n].short_name.toLowerCase()]);s.city&&delete s.state,this.locality=s.city||s.state||s.country||s.postal_code?s:null,console.log("===> site_script.js ===> locality",this.locality)}var l=new google.maps.LatLng(e.lat(),e.lng());i._panel.dest_coords=i.dest_coords=l;var c=100,_=1e3,d=null;for(var p in i.data_.stores_)if(i.data_.stores_.hasOwnProperty(p)){var g=i.data_.stores_[p].distanceTo(i.dest_coords);i.data_.stores_[p].content_=null,i.data_.stores_[p].props_.distance=g,i.data_.stores_[p].props_.dist_str=g.toFixed(2)+" "+asl_configuration.distance_unit,c<g&&(c=g),g<_&&(d=i.data_.stores_[p],_=g)}if(asl_configuration.radius_range=asl_configuration.fixed_radius?parseInt(asl_configuration.fixed_radius):Math.ceil(c),b(".asl-p-cont #asl-radius-input").html(asl_configuration.radius_range),delete asl_locator.Store.infoPanelCache_,asl_locator.Store.infoPanelCache_={},i.my_marker)i.my_marker.setPosition(l);else{i.my_marker=new google.maps.Marker({title:asl_configuration.words.your_cur_loc,position:l,zIndex:0,animation:google.maps.Animation.DROP,draggable:!0,map:i.getMap()});var u=new google.maps.MarkerImage(asl_configuration.URL+"public/img/me-pin.png",null,null,null);i.my_marker.setIcon(u),i.my_marker.addListener("dragend",function(e){i.measure_distance(e.latLng)})}function f(e){var t=null;if(t=asl_configuration.distance_slider&&asl_configuration.advance_filter||asl_configuration.fixed_radius?parseInt(asl_configuration.radius_range):100,t*=1e3,"KM"!=asl_configuration.distance_unit&&(t*=1.60934),i.$circle)i.$circle.setOptions({radius:t,center:e});else{var o=document.createElement("div");new function(e,t){$reset_btn=b('<div class="asl-radius-cnt"><div class="checkbox"><label for="asl-rad-circ"><input id="asl-rad-circ" checked type="checkbox">'+asl_configuration.words.radius_circle+"</label></div></div>"),e.appendChild($reset_btn[0]),$reset_btn.find("#asl-rad-circ")[0].addEventListener("click",function(){i.$circle.setMap(this.checked?i.getMap():null)})}(o,i.getMap());o.index=1,i.getMap().controls[google.maps.ControlPosition.RIGHT].push(o),i.$circle=new google.maps.Circle({strokeColor:asl_configuration.radius_color||"#FFFF00",strokeOpacity:.7,strokeWeight:2,fillColor:asl_configuration.radius_color||"#FFFF00",fillOpacity:.2,map:i.getMap(),radius:t,center:e})}i.getMap().fitBounds(i.$circle.getBounds())}if(t&&"1"==asl_configuration.search_destin&&d&&(l=d.getLocation()),asl_configuration.distance_slider&asl_configuration.advance_filter&&"1"==asl_configuration.distance_control){var h="KM"==asl_configuration.distance_unit?asl_configuration.words.Km:asl_configuration.words.Miles;if(i.$dist_control)asl_configuration.radius_range=i.$dist_control.val();else{for(var m=asl_configuration.dropdown_range.split(","),v="",y=0;y<m.length;y++){var w=m[y];v+=!(!w||"*"!=w[0])?'<option selected="selected" value="'+(w=w.replace("*",""))+'">'+w+" "+h+"</option>":'<option value="'+w+'">'+w+" "+h+"</option>"}b(".asl-p-cont .range_filter").html('<div class="asl-filter-cntrl"><label class="asl-cntrl-lbl">'+asl_configuration.words.distance+'</label>            <select class="asl-dist-ddl">'+v+"</select></div>").removeClass("hide"),i.$dist_control=b(".asl-p-cont .asl-dist-ddl"),i.$dist_control.multiselect({enableFiltering:!1,nonSelectedText:asl_configuration.words.select_distance,numberDisplayed:1,maxHeight:400,onChange:function(e,t){var o=parseInt(e.val());isNaN(o)&&(o=1e3),asl_configuration.radius_range=o,i.refreshView(!0),i._panel.stores_changed(),i.$circle&&f(i.dest_coords)}}),asl_configuration.radius_range=i.$dist_control.val()}}else asl_configuration.distance_slider&asl_configuration.advance_filter&&"0"==asl_configuration.distance_control&&(b(".asl-p-cont .range_filter").removeClass("hide"),i.$dist_control?(i.$dist_control.aslSlider("setAttribute","max",asl_configuration.radius_range),i.$dist_control.aslSlider("setValue",asl_configuration.radius_range),b("#asl-radius-input").html(asl_configuration.radius_range)):i.$dist_control=jQuery(".asl-p-cont #asl-radius-slide").aslSlider({value:asl_configuration.radius_range,min:1,max:asl_configuration.radius_range}).on("slide",function(e){b("#asl-radius-input").html(e.value),asl_configuration.radius_range=e.value}).on("slideStop",function(e){i.refreshView(!0),i._panel.stores_changed(),i.$circle&&f(i.dest_coords)}));asl_configuration.radius_circle?(f(i.dest_coords),i.refreshView(!0)):o||(i.getMap().setCenter(l),i.getMap().setZoom(asl_configuration.search_zoom?parseInt(asl_configuration.search_zoom):parseInt(asl_configuration.zoom)),google.maps.event.trigger(i,"load"),i.refreshView(!0))},asl_locator.View.prototype.reset_measure=function(e){var t=this;t._panel.dest_coords=t.dest_coords=null;var o=asl_configuration.radius_range;for(var a in t.data_.stores_)t.data_.stores_.hasOwnProperty(a)&&(t.data_.stores_[a].content_=null,t.data_.stores_[a].props_.dist_str=t.data_.stores_[a].props_.distance=null);asl_configuration.radius_range=asl_configuration.fixed_radius?parseInt(asl_configuration.fixed_radius):Math.round(o),b(".asl-p-cont #asl-radius-input").html(asl_configuration.radius_range),delete asl_locator.Store.infoPanelCache_,asl_locator.Store.infoPanelCache_={},t.my_marker&&(t.my_marker.setMap(null),delete t.my_marker,t.my_marker=null),asl_configuration.distance_slider&asl_configuration.advance_filter&&"1"==asl_configuration.distance_control?(t.$dist_control&&(t.$dist_control.multiselect("destroy"),t.$dist_control=null),b(".asl-p-cont .range_filter").addClass("hide")):asl_configuration.distance_slider&asl_configuration.advance_filter&&"0"==asl_configuration.distance_control&&(b(".asl-p-cont .range_filter").addClass("hide"),t.$dist_control&&(t.$dist_control.aslSlider("destroy"),t.$dist_control.removeData("aslSlider"),t.$dist_control=null)),t.refreshView(!0),b(e).val("")},asl_locator.View.prototype.geolocate_=function(){var t=this;window.navigator&&navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(e){t.measure_distance(new google.maps.LatLng(e.coords.latitude,e.coords.longitude))},function(e){var t=b('<div class="alert alert-danger asl-geo-err"></div>');switch(e.code){case e.PERMISSION_DENIED:t.html(e.message||"User denied the request for Geolocation.");break;case e.POSITION_UNAVAILABLE:t.html("Location information is unavailable.");break;case e.TIMEOUT:t.html("The request to get user location timed out.");break;case e.UNKNOWN_ERROR:t.html("An unknown error occurred.");break;default:t.html(e.message)}t.appendTo(".asl-p-cont .asl-map"),window.setTimeout(function(){t.remove()},5e3)},{maximumAge:6e4,timeout:1e4})},asl_locator.View.prototype.init_=function(){this.settings_.geolocation&&this.geolocate_(),this.markerCache_={};var e=asl_configuration.infobox_width||250,t="1"==asl_configuration.infobox_layout||"0"!=asl_configuration.template?asl_configuration.URL+"public/img/close__.png":asl_configuration.URL+"public/img/close_"+asl_configuration.color_scheme+".png";"1"==asl_configuration.infobox_layout&&(t="https://www.google.com/intl/en_us/mapfiles/close.gif"),this.infoWindow_=new InfoBox({boxStyle:{width:e+"px",margin:"0 0 "+asl_configuration.marker_height+"px -"+e/2+"px"},alignBottom:!0,pane:!1,disableAutoPan:!0,closeBoxMargin:"1"==asl_configuration.infobox_layout||"0"!=asl_configuration.template?"12px 5px -22px 0":"12px -7px -22px 0",closeBoxURL:t,infoBoxClearance:new google.maps.Size(1,1)});var o=this,a=this.getMap();this.set("updateOnPan",this.settings_.updateOnPan),google.maps.event.addListener(this.infoWindow_,"closeclick",function(){o.highlight(null)}),google.maps.event.addListener(a,"click",function(){o.highlight(null),o.infoWindow_.close()})},asl_locator.View.prototype.load_complete=function(){},asl_locator.View.prototype.updateOnPan_changed=function(){this.updateOnPanListener_&&google.maps.event.removeListener(this.updateOnPanListener_);if(this.get("updateOnPan")&&this.getMap()){var e=this.getMap();this.updateOnPanListener_=google.maps.event.addListener(e,"dragend",function(e){asl_configuration.reset_button&&b(".asl-reset-map")[0]&&"block"!=b(".asl-reset-map")[0].style&&(b(".asl-reset-map")[0].style.display="block")})}},asl_locator.View.prototype.addStoreToMap=function(e){var t=this.getMarker(e);e.setMarker(t);var o=this;t.clickListener_=google.maps.event.addListener(t,asl_configuration.mouseover?"mouseover":"click",function(){o.marker_clicked=!0,o.marker_center=t.getPosition(),o.highlight(e,!1),_asl_map_customize&&1==_asl_map_customize.marker_animations&&t.setAnimation(google.maps.Animation.Xp)}),t.getMap()!=this.getMap()&&(t.setMap(this.getMap()),_asl_map_customize&&1==_asl_map_customize.marker_animations&&t.setAnimation(google.maps.Animation.Xp))},asl_locator.View.prototype.createMarker=function(e){var t=null,o=asl_configuration.URL+"public/icon/";asl_configuration.category_marker&&1<=e.categories_.length?(t=2==asl_configuration.template&&asl_configuration.category_marker?new google.maps.Size(30,30):null,o=asl_configuration.URL+"public/svg/",o+=asl_categories[e.categories_[0]]&&asl_categories[e.categories_[0]].icon||"default.png"):o+=asl_markers[e.props_.marker_id]&&asl_markers[e.props_.marker_id].icon||"default.png";var a=asl_categories[e.categories_[0]]&&asl_categories[e.categories_[0]].name||"";return new google.maps.Marker({title:a+" | "+e.props_.title,position:e.getLocation(),zIndex:e.props_.ordr||0,animation:_asl_map_customize&&1==_asl_map_customize.marker_animations?google.maps.Animation.BOUNCE:null,icon:new google.maps.MarkerImage(o,null,null,null,t)})},asl_locator.View.prototype.getMarker=function(e){var t=this.markerCache_,o=e.id_;return t[o]||(t[o]=this.createMarker(e)),t[o]},asl_locator.View.prototype.getInfoWindow=function(e,t){if(!e)return this.infoWindow_;var o=b(e.getInfoWindowContent(t));return this.infoWindow_.setContent(o[0]),this.infoWindow_},asl_locator.View.prototype.getViewFeatures=function(){return this.settings_.features},asl_locator.View.prototype.getFeatureById=function(e){if(!this.featureById_){this.featureById_={};for(var t,o=0;t=this.settings_.features[o];o++)this.featureById_[t.id_]=t}return this.featureById_[e]},asl_locator.View.prototype.featureFilter_changed=function(){google.maps.event.trigger(this,"featureFilter_changed",this.get("featureFilter")),this.get("stores")&&this.clearMarkers()},asl_locator.View.prototype.clearMarkers=function(){for(var e in this.markerCache_){this.markerCache_[e].setMap(null);var t=this.markerCache_[e].clickListener_;t&&google.maps.event.removeListener(t)}},asl_locator.View.prototype.doBounce=function(e,t){var o=e.getMarker();o.setAnimation(null),t&&o.setAnimation(google.maps.Animation.BOUNCE)},asl_locator.View.prototype.refreshView=function(e){var d=this,p=this.getMap().getBounds();console.log("CALLING REFRESH VIEW"),this.data_.getStores(p,this.get("featureFilter"),function(e){var t=d.get("stores");if(t)for(var o=0,a=t.length;o<a;o++)google.maps.event.removeListener(t[o].getMarker().clickListener_);var i=[],s=[],n=!!(asl_configuration.distance_slider&&e&&e[0]&&e[0].props_.dist_str),r=Object.keys(asl_categories);for(var l in r)asl_categories[r[l]]&&(asl_categories[r[l]].len=0);for(var l in r)asl_categories[r[l]]&&(asl_categories[r[l]].len=0);for(var c in e)if(e.hasOwnProperty(c)&&(!d._location||e[c].props_.postal_code==d._location||e[c].props_.city==d._location||e[c].props_.state==d._location||e[c].props_.country==d._location)){if(asl_configuration.filter_result)if(null==d.locality){if(asl_configuration.default_city&&e[c].props_.city.toLowerCase()!=asl_configuration.default_city.toLowerCase())continue}else if(d.locality){var _=!1;if(d.locality.city&&e[c].props_.city&&-1!=d.locality.city.indexOf(e[c].props_.city.toLowerCase())?_=!0:d.locality.postal_code&&e[c].props_.postal_code&&-1!=d.locality.postal_code.indexOf(e[c].props_.postal_code.toLowerCase())?_=!0:d.locality.state&&e[c].props_.state&&-1!=d.locality.state.indexOf(e[c].props_.state.toLowerCase())&&(_=!0),!_)continue}if(asl_configuration.advance_filter){if(n&&e[c].props_.distance>=asl_configuration.radius_range)continue;if(asl_configuration.time_switch&&asl_configuration.show_opened&&1!=e[c].props_.open)continue}else if(asl_configuration.fixed_radius&&e[c].props_.distance&&e[c].props_.distance>=asl_configuration.fixed_radius)continue;for(var l in e[c].categories_)e[c].categories_.hasOwnProperty(l)&&asl_categories[e[c].categories_[l]]&&asl_categories[e[c].categories_[l]].len++;0<e[c].props_.ordr?s.push(e[c]):i.push(e[c])}"2"==asl_configuration.template&&asl_configuration.advance_filter&&b(".asl-p-cont .categories-panel .round-box").each(function(e){b(this).attr("data-c",asl_categories[b(this).attr("data-id")].len),this.children[0].children[1].children[0].children[1].innerHTML="("+asl_categories[b(this).attr("data-id")].len+")"});0<s.length&&d.data_.sortByDesc("ordr",s),asl_configuration.sort_by?d.data_.sortBy(asl_configuration.sort_by,i):i&&d.dest_coords?d.data_.sortDistance(d.dest_coords,i):p&&asl_configuration.sort_by_bound&&d.data_.sortDistance(p.getCenter(),i),0<s.length&&(i=s.concat(i)),asl_configuration.stores_limit&&(i=i.slice(0,asl_configuration.stores_limit)),d.set("stores",i)},e)},asl_locator.View.prototype.stores_changed=function(){var e=this.get("stores"),t=[];"1"!=asl_configuration.cluster&&this.clearMarkers();for(var o,a=0;o=e[a];a++)this.addStoreToMap(o),t.push(o.marker_);"1"==asl_configuration.cluster&&(asl_locator.marker_clusters.clearMarkers(),asl_locator.marker_clusters.addMarkers(t)),"1"!=asl_configuration.load_all&&this._panel.stores_changed()},asl_locator.View.prototype.getMap=function(){return this.map_},asl_locator.View.prototype.map_recenter=function(e,t,o){var a=this.getMap(),i=a.getProjection().fromLatLngToPoint(e instanceof google.maps.LatLng?e:a.getCenter()),s=new google.maps.Point(("number"==typeof t?t:0)/Math.pow(2,a.getZoom())||0,("number"==typeof o?o:0)/Math.pow(2,a.getZoom())||0);a.setCenter(a.getProjection().fromPointToLatLng(new google.maps.Point(i.x-s.x,i.y+s.y)))},asl_locator.View.prototype.highlight=function(e,t){var o=null,a=this.getMap();if(e){var i=this.get("stores");if(o=this.getInfoWindow(e,i),!t){var s=b('.asl-p-cont .sl-item[data-id="'+e.id_+'"]');s[0]&&b("#asl-storelocator #asl-list").animate({scrollTop:s.position().top},"fast")}if(e.getMarker()){e.getMarker();o.open(a,e.getMarker()),asl_configuration.analytics&&asl_locator.save_analytics(e,1)}else o.setPosition(e.getLocation()),o.open(a);if(asl_configuration.smooth_pan&&!t){var n=this._overlay.getProjection().fromLatLngToContainerPixel(e.getLocation());a.panBy(n.x-asl_configuration.info_x_offset-this.map_w/2,n.y-asl_configuration.info_y_offset-this.map_h/2)}else a.setZoom(parseInt(asl_configuration.zoom_li)),this.map_recenter(e.getLocation(),asl_configuration.info_x_offset,asl_configuration.info_y_offset);a.getStreetView().getVisible()&&a.getStreetView().setPosition(e.getLocation()),asl_configuration.highlight_first&&this._panel.stores_changed(e)}else this.getInfoWindow().close();this.set("selectedStore",e)},asl_locator.View.prototype.selectedStore_changed=function(){google.maps.event.trigger(this,"selectedStore_changed",this.get("selectedStore"))},asl_locator.ViewOptions=function(){},asl_locator.ViewOptions.prototype.updateOnPan,asl_locator.ViewOptions.prototype.geolocation,asl_locator.ViewOptions.prototype.features,asl_locator.ViewOptions.prototype.markerIcon,asl_locator.Feature=function(e,t,o,a){this.id_=e,this.name_=t,this.img_=o,this.order=a},asl_locator.Feature=asl_locator.Feature,asl_locator.Feature.prototype.getId=function(){return this.id_},asl_locator.Feature.prototype.getDisplayName=function(){return this.name_},asl_locator.Feature.prototype.toString=function(){return this.getDisplayName()},asl_locator.FeatureSet=function(e){this.array_=[],this.hash_={};for(var t,o=0;t=arguments[o];o++)this.add(t)},asl_locator.FeatureSet=asl_locator.FeatureSet,asl_locator.FeatureSet.prototype.toggle=function(e){this.hash_[e.id_]?this.remove(e):this.add(e)},asl_locator.FeatureSet.prototype.add=function(e){e&&(this.array_.push(e),this.hash_[e.id_]=1)},asl_locator.FeatureSet.prototype.remove=function(e){var t=e.id_;this.hash_[t]&&(delete this.hash_[t],this.array_=this.array_.filter(function(e){return e&&e.id_!=t}))},asl_locator.FeatureSet.prototype.asList=function(){for(var e=[],t=0,o=this.array_.length;t<o;t++){var a=this.array_[t];null!==a&&e.push(a)}return e},asl_locator.FeatureSet.NONE=new asl_locator.FeatureSet,asl_locator.Panel=function(e,t){this.el_=b(e),this.el_.addClass("asl_locator-panel"),this.settings_=b.extend({locationSearch:!0,locationSearchLabel:"Enter Location/ZipCode: ",featureFilter:!0,directions:!0,view:null},t),this.directionsRenderer_=new google.maps.DirectionsRenderer({draggable:!0}),this.directionsService_=new google.maps.DirectionsService,(t.view._panel=this).init_()},asl_locator.Panel=asl_locator.Panel,asl_locator.Panel.prototype=new google.maps.MVCObject,asl_locator.Panel.prototype.init_=function(){var s=this;this.itemCache_={},this.settings_.view&&this.set("view",this.settings_.view),this.filter_=b(".asl-p-cont .header-search");var a=s.get("view").getMap();if("1"==asl_configuration.cluster&&(asl_locator.marker_clusters=new MarkerClusterer(a,[],{maxZoom:parseInt(asl_configuration.cluster_max_zoom)||9,gridSize:parseInt(asl_configuration.cluster_grid_size)||90,imagePath:asl_configuration.URL+"public/icon/m"})),this.settings_.locationSearch&&(this.locationSearch_=this.filter_,void 0!==google.maps.places?"0"==asl_configuration.search_type&&this.initAutocomplete_():this.filter_.submit(function(){s.searchPosition(b("input",s.locationSearch_).val())}),this.filter_.submit(function(){return!1}),google.maps.event.addListener(this,"geocode",function(e){if(s.searchPositionTimeout_&&window.clearTimeout(s.searchPositionTimeout_),e.geometry){this.directionsFrom_=e.geometry.location,s.directionsVisible_&&s.renderDirections_();var t=s.get("view");t.highlight(null);var o=t.getMap();e.geometry.viewport?o.fitBounds(e.geometry.viewport):(o.setCenter(e.geometry.location),o.setZoom(parseInt(asl_configuration.zoom_li))),t.refreshView(),s.listenForStoresUpdate_()}else s.searchPosition(e.name)})),this.settings_.featureFilter){this.featureFilter_=b(".asl-p-cont #filter-options"),this.featureFilter_.show(),asl_configuration.show_categories||b(".asl-p-cont .drop_box_filter").remove(),asl_configuration.advance_filter&&b(".asl-p-cont .asl-advance-filters").removeClass("hide"),asl_configuration.radius_range||(asl_configuration.radius_range=asl_configuration.fixed_radius?parseInt(asl_configuration.fixed_radius):1e3),asl_configuration.time_switch&&b("#asl-open-close")[0]?b("#asl-open-close").bind("change",function(e){asl_configuration.show_opened=this.checked,s.get("view").refreshView(!0),s.stores_changed()}):b(".asl-p-cont .Status_filter").remove();var e=this.get("view").getViewFeatures().asList();this.featureFilter_.find(".inner-filter");if(this.storeList_=this.el_.find(".panel-inner"),asl_configuration.show_categories){e="name_"==asl_configuration.cat_sort?asl_underscore.sortBy(e,asl_configuration.cat_sort):asl_underscore.sortBy(e,function(e){return-e.order});var t="1"==asl_configuration.single_cat_select?"":'multiple="multiple"';if("2"==asl_configuration.template&&asl_configuration.advance_filter){for(var n=b(".asl-p-cont .categories-panel"),o=asl_configuration.URL+"public/svg/",i=0,r=e.length;i<r;i++){var l=e[i],c=b('<div class="round-box" data-c="'+asl_categories[l.id_].len+'" data-id="'+l.id_+'"><div class="iner-box"><div class="box-icon">                      <span style="background-image:url('+o+l.img_+')"></span></div><div class="cat-name"><span>'+l.getDisplayName()+"<br><span>("+asl_categories[l.id_].len+")</span></span></div></div></div>");n.append(c),c.data("feature",l)}b(".asl-p-cont .Num_of_store .back-button").bind("click",function(e){var t=s.get("featureFilter");for(var o in t.array_)t.array_.pop();s.get("view").refreshView(),s.el_.addClass("hide"),b(".asl-p-cont .cats-title").removeClass("hide"),b(".asl-p-cont .Num_of_store").addClass("hide"),n.removeClass("hide"),a.panTo(new google.maps.LatLng(asl_configuration.default_lat,asl_configuration.default_lng)),a.setZoom(parseInt(asl_configuration.zoom))}),n.find(".round-box").bind("click",function(e){var t=b(this),o=s.get("featureFilter");for(var a in o.array_)o.array_.pop();var i=t.data("feature");o.add(i),s.set("featureFilter",o),s.get("view").refreshView(),b(".asl-p-cont .Num_of_store .sele-cat").html(i.name_),b(".asl-p-cont .Num_of_store .sele-cat").html(i.len),n.addClass("hide"),b(".asl-p-cont .cats-title").addClass("hide"),b(".asl-p-cont .Num_of_store img").attr("src",asl_configuration.URL+"public/svg/"+i.img_),s.el_.removeClass("hide").animate({scrollTop:0},0),b(".asl-p-cont .Num_of_store").removeClass("hide")})}else{if(b(".asl-p-cont #categories_filter").append('<select id="asl-categories" '+t+' style="width:350px"></select>'),s.$category_ddl=b(".asl-p-cont #asl-categories"),"1"==asl_configuration.single_cat_select){c=b('<option value="0">'+asl_configuration.words.none+"</option>");s.$category_ddl.append(c)}asl_configuration.select_category&&(asl_configuration.select_category=asl_configuration.select_category.split(","));for(i=0,r=e.length;i<r;i++){l=e[i];if((c=b('<option  value="'+l.id_+'">'+l.getDisplayName()+"</option>")).data("feature",l),s.$category_ddl.append(c),asl_configuration.select_category&&-1!=jQuery.inArray(l.id_,asl_configuration.select_category)){var _=s.get("featureFilter");_.add(l),s.set("featureFilter",_)}}if(asl_configuration.select_category){var d=1==asl_configuration.select_category.length?asl_configuration.select_category[0]:asl_configuration.select_category;s.$category_ddl.val(d)}s.$category_ddl.multiselect({enableFiltering:!0,disableIfEmpty:!0,enableCaseInsensitiveFiltering:!0,nonSelectedText:asl_configuration.words.select_option,filterPlaceholder:asl_configuration.words.search||"Search",nonSelectedText:asl_configuration.words.none_selected||"None Selected",nSelectedText:asl_configuration.words.selected||"selected",allSelectedText:asl_configuration.words.all_selected||"All selected",includeSelectAllOption:!1,numberDisplayed:1,maxHeight:400,onChange:function(e,t){if("1"==asl_configuration.single_cat_select){var o=s.get("featureFilter");for(var a in o.array_)o.array_.pop();var i=e.data("feature");o.add(i),s.set("featureFilter",o)}else{i=e.data("feature");s.toggleFeatureFilter_(i)}s.get("view").refreshView()}})}this.featureFilter_.find("input").change(function(){var e=b(this).data("feature");s.toggleFeatureFilter_(e),s.get("view").refreshView()})}}this.directionsPanel_=b(".asl-p-cont #agile-modal-direction");var p=this.directionsPanel_.find(".frm-place");p.val(""),s.dest_coords&&(u.directionsFrom_=s.dest_coords);var g=this.directionsPanel_.find(".frm-place")[0];this.input_search=new google.maps.places.Autocomplete(g);this.input_search.setFields(["geometry"]);var u=this;google.maps.event.addListener(this.input_search,"place_changed",function(){u.directionsFrom_=this.getPlace().geometry.location}),this.directionsPanel_.find(".directions-to").attr("readonly","readonly"),this.directionsVisible_=!1,this.directionsPanel_.find(".btn-submit").click(function(e){return s.dest_coords&&p.val()==asl_configuration.words.current_location&&(s.directionsFrom_=s.dest_coords||null),s.renderDirections_(),!1}),"KM"==asl_configuration.distance_unit?(s.distance_type=google.maps.UnitSystem.METRIC,s.directionsPanel_.find("#rbtn-km")[0].checked=!0):s.distance_type=google.maps.UnitSystem.IMPERIAL,s.directionsPanel_.find("input[name=dist-type]").change(function(){s.distance_type=1==this.value?google.maps.UnitSystem.IMPERIAL:google.maps.UnitSystem.METRIC}),this.el_.find(".directions-cont .close").click(function(){s.hideDirections(),b(".asl-p-cont .count-row").removeClass("hide"),b(".asl-p-cont #filter-options").removeClass("hide")}),this.directionsPanel_.find(".close-directions").click(function(){s.hideDirections(),b(".asl-p-cont .count-row").removeClass("hide"),b(".asl-p-cont #filter-options").removeClass("hide")})},asl_locator.Panel.prototype.toggleFeatureFilter_=function(e){var t=this.get("featureFilter");t.toggle(e),this.set("featureFilter",t)},asl_locator.geocoder_=new google.maps.Geocoder,asl_locator.Panel.prototype.listenForStoresUpdate_=function(){var e=this,t=this.get("view");this.storesChangedListener_&&google.maps.event.removeListener(this.storesChangedListener_),this.storesChangedListener_=google.maps.event.addListenerOnce(t,"stores_changed",function(){e.set("stores",t.get("stores"))})},asl_locator.Panel.prototype.searchPosition=function(e){var o=this,t={address:e,bounds:this.get("view").getMap().getBounds()};asl_locator.geocoder_.geocode(t,function(e,t){t==google.maps.GeocoderStatus.OK&&google.maps.event.trigger(o,"geocode",e[0])})},asl_locator.Panel.prototype.setView=function(e){this.set("view",e)},asl_locator.Panel.prototype.view_changed=function(){var e=this,t=this.get("view");this.bindTo("selectedStore",t),this.geolocationListener_&&google.maps.event.removeListener(this.geolocationListener_),this.zoomListener_&&google.maps.event.removeListener(this.zoomListener_),this.idleListener_&&google.maps.event.removeListener(this.idleListener_);t.getMap().getCenter();var o=function(){a||e.listenForStoresUpdate_()};this.geolocationListener_=google.maps.event.addListener(t,"load",o),this.zoomListener_=google.maps.event.addListener(t.getMap(),"zoom_changed",o),this.idleListener_=google.maps.event.addListener(t.getMap(),"idle",function(){return e.idle_(t.getMap())}),o(),this.bindTo("featureFilter",t),this.autoComplete_&&this.autoComplete_.bindTo("bounds",t.getMap())},asl_locator.Panel.prototype.geoCoder=function(o,a){var i=this,s=new google.maps.Geocoder;a=a||function(e,t){"OK"==t?(window.asl_place_search_hook&&"function"==typeof window.asl_place_search_hook&&asl_place_search_hook.call(this,e),i.get("view").measure_distance(e[0].geometry.location,!0,null,e),"2"==asl_configuration.load_all&&b(".asl-reload-map").trigger("click"),b(o).next().removeClass("hide")):console.log("Geocode was not successful for the following reason: "+t)};b(o).bind("keyup",function(e){if(13==e.keyCode){var t=b.trim(this.value);t&&s.geocode({address:t},a)}}),o&&asl_configuration["default-addr"]&&window.setTimeout(function(){asl_configuration.req_coords?s.geocode({address:asl_configuration["default-addr"]},a):(i.get("view").measure_distance(new google.maps.LatLng(asl_configuration.default_lat,asl_configuration.default_lng),!0,null,null),"2"==asl_configuration.load_all&&b(".asl-reload-map").trigger("click")),b(o).next().removeClass("hide")},800),b(".asl-p-cont .icon-search").bind("click",function(e){var t=b.trim(o.value);t&&s.geocode({address:t},a)})},asl_locator.Panel.prototype.initAutocomplete_=function(){var t=this,o=b(".asl-p-cont #auto-complete-search,.asl-p-cont .asl-search-address")[0];if(!asl_configuration.geocoding_only){var e={};asl_configuration.google_search_type&&(e.types="cities"==asl_configuration.google_search_type||"regions"==asl_configuration.google_search_type?["("+asl_configuration.google_search_type+")"]:[asl_configuration.google_search_type]),asl_configuration.country_restrict&&(e.componentRestrictions={country:asl_configuration.country_restrict.toLowerCase()}),this.autoComplete_=new google.maps.places.Autocomplete(o,e);var a=["geometry"];asl_configuration.filter_result&&a.push("address_components"),this.autoComplete_.setFields(a),this.get("view")&&this.autoComplete_.bindTo("bounds",this.get("view").getMap()),google.maps.event.addListener(this.autoComplete_,"place_changed",function(){var e=this.getPlace();asl_configuration.analytics&&asl_locator.save_analytics(e),e.geometry&&(t.get("view").measure_distance(e.geometry.location,!0,null,e),window.asl_place_search_hook&&"function"==typeof window.asl_place_search_hook&&asl_place_search_hook.call(this,e),b(o).next().removeClass("hide"),"2"==asl_configuration.load_all&&b(".asl-reload-map").trigger("click"))})}t.geoCoder(o)},asl_locator.Panel.prototype.idle_=function(e){this.center_?e.getBounds().contains(this.center_)||(this.center_=e.getCenter(),this.listenForStoresUpdate_()):this.center_=e.getCenter()},asl_locator.Panel.prototype.stores_changed=function(e){if(this.get("stores")){var o=this,t=this.get("view");if(!(t.showing_direction||asl_configuration.accordion&&t.is_updated)){t.is_updated=!0;var a=t&&t.getMap().getBounds(),i=t.get("stores"),s=this.get("selectedStore");if(asl_configuration.highlight_first&&e){for(var n=[],r=[],l=0;l<i.length;l++)i[l].id_==e.id_?n.push(i[l]):r.push(i[l]);i=n.concat(r)}asl_configuration.highlight_first&&e&&jQuery(".asl-p-cont #asl-list").animate({scrollTop:0},"fast"),asl_configuration.accordion||this.storeList_.empty(),i.length?(a&&a.contains(i[0].getLocation()),b(".asl-p-cont .Num_of_store .count-result").html(i.length)):(b(".asl-p-cont .Num_of_store .count-result").html("0"),o.storeList_.html('<div class="asl-overlay-on-item" id="asl-no-item-found"><div class="white"></div><h1 class="h1">'+asl_configuration.no_item_text+"</h1></div>"));var c=function(e){b(e.target).hasClass("s-direction")?e.preventDefault():"A"!=e.target.tagName&&(t.noRefreshList=!0,t.highlight(this.store,!0),asl_configuration.is_mob&&window.innerWidth<=480&&b("html, body").stop().animate({scrollTop:b(t.getMap().getDiv()).offset().top},900,"swing"))};if(asl_configuration.accordion){var _=this.get("view").data_,d=(_.stateCities,this.storeList_.find("ul")),p="";asl_configuration.category_accordion?(p=_.generateHTMLCategories(),d.attr("id","p-catlist")):_.countries?(p=_.generateHTMLCountriesStates(_.stateCities),d.attr("id","p-countlist")):p=_.generateHTMLStates(_.stateCities),d.html(p),b(".asl-p-cont #asl-list .load-more").bind("click",function(){b(this).parent().addClass("reveal-it")}),b(".asl-p-cont #asl-list .hide-more").bind("click",function(){b(this).parent().removeClass("reveal-it")}),b(".asl-p-cont .item-state > a span:empty").each(function(e){var t=b(this).parent().next().find("li.panel");t.appendTo(t.parent().parent().parent().parent()),b(this).parent().remove()})}for(var g=0,u=i.length;g<u;g++){var f=i[g].getInfoPanelItem();f.store=i[g];i[g];if(s&&i[g].id_==s.id_&&b(f).addClass("highlighted"),f.clickHandler_||(f.clickHandler_=google.maps.event.addDomListener(f,"click",c)),f.addEventListener("mouseenter",t.doBounce.bind(t,i[g],!0)),f.addEventListener("mouseleave",t.doBounce.bind(t,i[g],!1)),b(f).find(".s-direction").click(function(e){var t=b(this).data("_store");o.directionsTo_=t,o.showDirections(t)}).data("_store",i[g]),asl_configuration.category_accordion)if(i[g].props_.c_ids.length){var h="#sl-cat-"+i[g].props_.c_ids[0];b(h).append(f);for(var m=1;m<i[g].props_.c_ids.length;m++){h="#sl-cat-"+i[g].props_.c_ids[m];var v=f.cloneNode(!0);v.store=f.store,v.clickHandler_=google.maps.event.addDomListener(v,"click",c),v.addEventListener("mouseenter",t.doBounce.bind(t,i[g],!0)),v.addEventListener("mouseleave",t.doBounce.bind(t,i[g],!1)),b(h).append(v)}}else o.storeList_.append(f);else if(asl_configuration.accordion){h="#city-list-"+i[g].props_.state.replace(asl_configuration.regex,"").replace(/[ ]/gi,"-").toLowerCase()+"-"+i[g].props_.city.replace(asl_configuration.regex,"").replace(/[ ]/gi,"-").toLowerCase();b(h).append(f)}else o.storeList_.append(f)}b(".asl-p-cont .item-state ul:empty").each(function(e){b(this).parent().parent().remove()})}}},asl_locator.Panel.prototype.selectedStore_changed=function(){b(".highlighted",this.storeList_).removeClass("highlighted");var e=this,t=this.get("selectedStore"),o=e.get("view");if(o.active_marker&&o.active_marker.m&&(o.active_marker.m.setIcon(o.active_marker.picon),o.active_marker.m=null),t){var a=t.getMarker();o.active_marker&&(o.active_marker.picon=a.getIcon(),(o.active_marker.m=a).setIcon(o.active_marker.icon)),this.directionsTo_=t;var i=this.storeList_.find('div[data-id="'+t.id_+'"]');if(i&&(i.addClass("highlighted"),asl_configuration.accordion&&!asl_configuration.category_accordion)){var s=b(".asl-p-cont .panel-inner").find(".collapse.in"),n=i.parentsUntil(".panel-inner","div.collapse");s.length&&s[s.length-1].id!=n[0].id&&s.collapse("hide"),window.setTimeout(function(){if(n)for(var e=n.length-1;0<=e;e--)b(n[e]).collapse("show")},800)}this.settings_.directions&&this.directionsPanel_.find(".directions-to").val(t.getDetails().title);var r=e.get("view").getInfoWindow().getContent(),l=b("<a/>").text(asl_configuration.words.direction).attr("href","javascript:void(0)").addClass("action").addClass("directions"),c=b("<a/>").text(asl_configuration.words.zoom).attr("href","javascript:void(0)").addClass("action").addClass("zoomhere"),_=t.props_.website;if(l.click(function(){return e.showDirections(),!1}),c.click(function(){e.get("view").getMap().setOptions({center:t.getLocation(),zoom:asl_map.getZoom()+1})}),b(r).find(".asl-buttons").append(l).append(c),_){var d=b("<a/>").text(asl_configuration.words.detail).attr("href",_).addClass("action").addClass("a-website");"1"==asl_configuration.target_blank&&d.attr("target","_blank"),b(r).find(".asl-buttons").append(d)}}},asl_locator.Panel.prototype.hideDirections=function(){this.directionsVisible_=!1,this.directionsPanel_.removeClass("in"),this.el_.find(".directions-cont").addClass("hide"),this.storeList_.fadeIn(),this.directionsRenderer_.setMap(null),this.get("view").showing_direction=!1},asl_locator.Panel.prototype.showDirections=function(e){var t=this.get("selectedStore")||e;if(t){if(_isMobileDevice()&&"1"==asl_configuration.direction_redirect||"2"==asl_configuration.direction_redirect){var o=t.location_.lat()+","+t.location_.lng(),a="";return a=-1!=navigator.platform.indexOf("iPhone")||-1!=navigator.platform.indexOf("iPad")||-1!=navigator.platform.indexOf("iPod")?"https://maps.google.com/maps?daddr="+o+"&amp;ll=":asl_configuration.fix_direction?"https://www.google.com/maps/dir/"+asl_configuration.words.cur_dir+"/"+o+"?hl=en":"https://www.google.com/maps/dir/?api=1&destination="+o,window.open(a,"_blank"),!0}this.directionsPanel_.find(".frm-place").val(this.dest_coords?asl_configuration.words.current_location:""),this.directionsPanel_.find(".directions-to").val(t.getDetails().title),this.directionsPanel_.addClass("in"),this.renderDirections_(),this.directionsVisible_=!0}},asl_locator.Panel.prototype.renderDirections_=function(){var a=this;if(this.directionsFrom_&&this.directionsTo_){this.el_.find("#map-loading").show(),this.el_.find(".directions-cont").removeClass("hide"),this.storeList_.fadeOut(),a.directionsPanel_.removeClass("in");var i=this.el_.find(".rendered-directions").empty();this.directionsService_.route({origin:this.directionsFrom_,destination:this.directionsTo_.getLocation(),travelMode:google.maps.DirectionsTravelMode.DRIVING,unitSystem:a.distance_type},function(e,t){if(a.el_.find("#map-loading").hide(),t==google.maps.DirectionsStatus.OK){b(".asl-p-cont .count-row").addClass("hide"),b(".asl-p-cont #filter-options").addClass("hide"),a.get("view").showing_direction=!0;var o=a.directionsRenderer_;o.setPanel(i[0]),o.setMap(a.get("view").getMap()),o.setDirections(e)}}),this.directionsFrom_=null}},asl_locator.Panel.prototype.featureFilter_changed=function(){this.listenForStoresUpdate_()},asl_locator.PanelOptions=function(){},asl_locator.prototype.locationSearch,asl_locator.PanelOptions.prototype.locationSearchLabel,asl_locator.PanelOptions.prototype.featureFilter,asl_locator.PanelOptions.prototype.directions,asl_locator.PanelOptions.prototype.view}(jQuery),function($,_){var map=null,asl_engine={config:{},helper:{}};if(window.asl_engine=asl_engine,window.asl_configuration){asl_configuration.category_accordion="2"==asl_configuration.layout,asl_configuration.accordion=!("1"!=asl_configuration.layout&&!asl_configuration.category_accordion),asl_configuration.analytics="1"==asl_configuration.analytics,asl_configuration.sort_by_bound="1"==asl_configuration.sort_by_bound,asl_configuration.sort_by_bound=!1,asl_configuration.scroll_wheel="1"==asl_configuration.scroll_wheel,asl_configuration.distance_slider="1"==asl_configuration.distance_slider,asl_configuration.show_categories="0"!=asl_configuration.show_categories,asl_configuration.time_switch="0"!=asl_configuration.time_switch,asl_configuration.category_marker="0"!=asl_configuration.category_marker,asl_configuration.advance_filter="0"!=asl_configuration.advance_filter,asl_configuration.time_24="1"==asl_configuration.time_format,asl_configuration.smooth_pan="1"==asl_configuration.smooth_pan,asl_configuration.week_hours="1"==asl_configuration.week_hours,asl_configuration.user_center="1"==asl_configuration.user_center,asl_configuration.distance_unit="KM"==asl_configuration.distance_unit?asl_configuration.distance_unit:"Miles",asl_configuration.filter_result="1"==asl_configuration.filter_result,asl_configuration.regex=asl_configuration.no_regex?/#|\./gi:/[^a-z0-9\s]/gi,asl_configuration.info_x_offset=asl_configuration.info_x_offset&&!isNaN(asl_configuration.info_x_offset)?parseInt(asl_configuration.info_x_offset):0,asl_configuration.info_y_offset=asl_configuration.info_y_offset&&!isNaN(asl_configuration.info_y_offset)?parseInt(asl_configuration.info_y_offset):0,asl_configuration.enter_key=!0,asl_configuration.category_sort=!0,asl_configuration.stores_limit=asl_configuration.stores_limit&&!isNaN(asl_configuration.stores_limit)?parseInt(asl_configuration.stores_limit):null,asl_configuration.radius_circle="1"==asl_configuration.radius_circle,asl_configuration.marker_height=asl_configuration.marker_height?asl_configuration.marker_height:"43",asl_configuration.info_y_offset||(asl_configuration.info_y_offset=-30,"1"==asl_configuration.infobox_layout&&(asl_configuration.info_y_offset=-130)),asl_configuration.filter_result=!1,asl_configuration.smooth_pan=!1,window.gm_authFailure=function(){var e=$('<div class="alert alert-danger asl-geo-err"></div>');e.html("This API project is not authorized to use this API. Please ensure this API is activated in the Google Developers."),e.appendTo(".asl-p-cont"),window.setTimeout(function(){e.remove()},5e3)},asl_configuration.no_script&&$(".asl-p-cont p:empty").remove(),asl_configuration.fixed_radius=asl_configuration.fixed_radius&&!isNaN(asl_configuration.fixed_radius)?parseInt(asl_configuration.fixed_radius):null,asl_configuration.is_mob=_isMobileDevice(),"3"==asl_configuration.search_type&&(asl_configuration.search_type="0",asl_configuration.geocoding_only=!0),""!=asl_configuration.full_height&&$("#asl-storelocator").css("height",jQuery(window).height()+"px"),asl_configuration.is_mob&&asl_configuration.mobile_load_bound&&(asl_configuration.load_all="2",asl_configuration.search_type="0"),"0"==asl_configuration.search_type&&"1"==asl_configuration.distance_control||(console.log("Radius Circle Works with Google Search Only and Distance Control."),asl_configuration.radius_circle=!1),asl_configuration.is_mob&&asl_configuration.mobile_stores_limit&&(asl_configuration.stores_limit=asl_configuration.mobile_stores_limit&&!isNaN(asl_configuration.mobile_stores_limit)?parseInt(asl_configuration.mobile_stores_limit):null),asl_configuration.advance_filter||$(".asl-p-cont").addClass("no-asl-filters"),asl_configuration.accordion?(asl_configuration.load_all="1",asl_configuration.filter_result=asl_configuration.advance_filter=!1):asl_configuration.mobile_stores_limit=asl_configuration.mobile_stores_limit?parseInt(asl_configuration.mobile_stores_limit):100,asl_configuration.radius_circle&&"1"!=asl_configuration.load_all&&(console.log("Radius Circle Works with load all only"),asl_configuration.radius_circle=!1),asl_configuration.advance_filter&&$("#asl-open-close")[0]&&($("#asl-open-close")[0].checked=!0);var asl_lat=asl_configuration.default_lat?parseFloat(asl_configuration.default_lat):39.9217698526,asl_lng=asl_configuration.default_lng?parseFloat(asl_configuration.default_lng):-75.5718432,categories={},asl_date=new Date;asl_configuration.default_lat=asl_lat,asl_configuration.default_lng=asl_lng,asl_configuration.show_opened=!0,$("#asl-dist-unit").html(asl_configuration.distance_unit),asl_engine.helper.asl_leadzero=function(e){return 9<e?""+e:"0"+e},asl_engine.helper.asl_timeConvert=function(e){if(!e)return 0;var t=$.trim(e).toUpperCase();if(/(1[012]|[0-9]):[0-5][0-9]$/.test(t))return(o=Number(t.match(/^(\d+)/)[1]))+(a=Number(t.match(/:(\d+)/)[1]))/100;if(/(1[012]|[1-9]):[0-5][0-9][ ]?(AM|PM)/.test(t)){var o=Number(t.match(/^(\d+)/)[1]),a=Number(t.match(/:(\d+)/)[1]),i=-1!=t.indexOf("PM")?"PM":"AM";return"PM"==i&&o<12&&(o+=12),"AM"==i&&12==o&&(o-=12),o+a/100}return 0},asl_engine.helper.between=function(e,t,o){return t<e&&e<o},asl_engine.helper.implode=function(e,t){for(var o=[],a=0,i=e.length;a<i;a++)e[a]&&o.push(e[a]);return o.join(t)},asl_engine.helper.toObject_=function(e,t){for(var o={},a=0,i=t.length;a<i;a++)o[e[a]]=t[a];return o},asl_engine.helper.distanceCalc=function(e){var t=this.getLocation(),o=asl_locator.toRad_(t.lat()),a=asl_locator.toRad_(t.lng()),i=asl_locator.toRad_(e.lat()),s=i-o,n=asl_locator.toRad_(e.lng())-a,r=Math.sin(s/2)*Math.sin(s/2)+Math.cos(o)*Math.cos(i)*Math.sin(n/2)*Math.sin(n/2);return 6371*(2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r)))},asl_engine.dataSource=function(){this.stores_=[],this.remote_url=ASL_REMOTE.ajax_url},asl_engine.dataSource.prototype.getCountriesStateCities=function(e){for(var t={},o=0;o<e.length;o++)t[e[o].props_.country]||(t[e[o].props_.country]={}),t[e[o].props_.country][e[o].props_.state]||(t[e[o].props_.country][e[o].props_.state]=[]),-1==t[e[o].props_.country][e[o].props_.state].indexOf(e[o].props_.city)&&t[e[o].props_.country][e[o].props_.state].push(e[o].props_.city);return t},asl_engine.dataSource.prototype.getStateCities=function(e){for(var t={},o=0;o<e.length;o++)t[e[o].props_.state]||(t[e[o].props_.state]=[]),-1==t[e[o].props_.state].indexOf(e[o].props_.city)&&t[e[o].props_.state].push(e[o].props_.city);return t},asl_engine.dataSource.prototype.generateHTMLCategories=function(){var e="";for(var t in asl_categories)if(asl_categories.hasOwnProperty(t)){var o=asl_categories[t],a=o.id;o.len&&(e+='<li data-id="'+a+'"  class="item-state panel asl-state-li">                        <a class="collapsed" href="#collapse'+a+'"  aria-controls="collapse'+a+'" data-parent="#p-catlist" data-toggle="collapse"><span>'+o.name+'</span></a>                        <div id="collapse'+a+'" class="collapse" role="tabpanel">                        <ul class="sl-acc-layout" id="sl-cat-'+a+'">',e+="</ul></div></li>")}return e},asl_engine.dataSource.prototype.generateHTMLCountriesStates=function(e){var t="",o=Object.keys(e).sort();for(var a in o)if(o.hasOwnProperty(a)){var i=o[a];t+='<li data-id="'+i.replace(asl_configuration.regex,"").replace(/[ ]/gi,"-").toLowerCase()+'" class="item-state panel asl-country-li">                  <a class="collapsed" href="#collapse-'+a+'"  aria-controls="collapse-'+a+'" data-parent="#p-countlist" data-toggle="collapse"><span>'+i+'</span></a>                  <div id="collapse-'+a+'" class="collapse" role="tabpanel">                  <ul id="p-statelist-'+a+'">';var s=Object.keys(e[o[a]]).sort();for(var n in s)if(s.hasOwnProperty(n)){var r=s[n];t+='<li data-id="'+r.replace(asl_configuration.regex,"").replace(/[ ]/gi,"-").toLowerCase()+'"  class="item-state panel asl-state-li">                      <a class="collapsed" href="#collapse'+n+"-"+a+'"  aria-controls="collapse'+n+"-"+a+'" data-parent="#p-statelist-'+a+'" data-toggle="collapse"><span>'+r+'</span></a>                      <div id="collapse'+n+"-"+a+'" class="collapse" role="tabpanel">                      <ul id="item-city-'+n+"-"+a+'">';var l=e[o[a]][s[n]].sort();for(var c in l)if(l.hasOwnProperty(c)){var _=s[n].replace(asl_configuration.regex,"").replace(/[ ]/gi,"-").toLowerCase()+"-"+l[c].replace(asl_configuration.regex,"").replace(/[ ]/gi,"-").toLowerCase();t+='<li data-id="'+_+'" class="item-state panel"><a class="collapsed" href="#collapse'+a+"-"+n+"-"+c+'" data-parent="#item-city-'+n+"-"+a+'" data-toggle="collapse"><span>'+l[c]+'</span></a>                      <div class="collapse" id="collapse'+a+"-"+n+"-"+c+'" role="tabpanel"><div id="city-list-'+_+'"></div></div></li>'}t+="</ul></div></li>"}t+="</ul></div></li>"}return t},asl_engine.dataSource.prototype.generateHTMLStates=function(e){var t="",o=Object.keys(e).sort();for(var a in o)if(o.hasOwnProperty(a)){t+='<li data-id="'+o[a].replace(asl_configuration.regex,"").replace(/[ ]/gi,"-").toLowerCase()+'"   class="item-state panel">                    <a class="collapsed" href="#collapse'+a+'"  aria-controls="collapse'+a+'" data-parent="#p-statelist" data-toggle="collapse"><span>'+o[a]+'</span></a>                    <div id="collapse'+a+'" class="collapse" role="tabpanel">                    <ul id="item-city-'+a+'">';var i=e[o[a]].sort();for(var s in i)if(i.hasOwnProperty(s)){var n=o[a].replace(asl_configuration.regex,"").replace(/[ ]/gi,"-").toLowerCase()+"-"+i[s].replace(asl_configuration.regex,"").replace(/[ ]/gi,"-").toLowerCase();t+='<li data-id="'+n+'" class="item-state panel"><a class="collapsed" href="#collapse'+a+"-"+s+'" data-parent="#item-city-'+a+'" data-toggle="collapse"><span>'+i[s]+'</span></a>                <div class="collapse" id="collapse'+a+"-"+s+'" role="tabpanel"><div id="city-list-'+n+'"></div></div></li>'}t+="</ul></div></li>"}return t},asl_engine.dataSource.prototype.sortDistance=function(o,e){e=e.sort(function(e,t){return e.distanceTo(o)-t.distanceTo(o)})},asl_engine.dataSource.prototype.sortBy=function(o,e){"cat"==o?e.sort(function(e,t){var o=e.props_.cat,a=t.props_.cat,i=e.props_.distance,s=t.props_.distance;return o==a?i<s?-1:s<i?1:0:o<a?-1:1}):e.sort(function(e,t){return e.props_[o]>t.props_[o]?1:t.props_[o]>e.props_[o]?-1:0})},asl_engine.dataSource.prototype.sortByDesc=function(o,e){e.sort(function(e,t){return e.props_[o]<t.props_[o]?1:t.props_[o]<e.props_[o]?-1:0})};var not_initial_load=!1,asl_view=null,asl_panel=null;asl_engine.dataSource.prototype.fetch_remote_data=function(b){var x=this;$(".asl-p-cont .asl-overlay").show();var e={action:"asl_load_stores",nonce:ASL_REMOTE.nonce,load_all:asl_configuration.load_all,layout:asl_configuration.layout?1:0};if(asl_configuration.stores&&(e.stores=asl_configuration.stores),"1"!=asl_configuration.load_all){var t=map.getBounds(),o=t.getNorthEast(),a=t.getSouthWest(),i=t.getCenter();e.lat=i.lat(),e.lng=i.lng(),e.nw=[o.lat(),a.lng()],e.se=[a.lat(),o.lng()]}asl_configuration.category&&(e.category=asl_configuration.category),x.on_call=!0,$.ajax({url:ASL_REMOTE.ajax_url,data:e,type:"GET",dataType:"json",success:function(e){if(x.stores_=x.parseData(e),"2"==asl_configuration.load_all&&$(".asl-reload-map").find("i").removeClass("animate-spin"),$("#asl-storelocator .asl-search-name")[0]&&asl_locator.add_prop_search(e,$("#asl-storelocator .asl-search-name")),"2"==asl_configuration.search_type){var t=$("#asl-storelocator .asl-search-address"),o=[],a=asl_underscore.uniq(e,!1,function(e){return e.city}),i=asl_underscore.uniq(e,!1,function(e){return e.state}),s=asl_underscore.uniq(e,!1,function(e){return e.country}),n=asl_underscore.uniq(e,!1,function(e){return e.postal_code});for(var r in n)n.hasOwnProperty(r)&&o.push({type:"postal_code",title:n[r].postal_code});for(var r in a)a.hasOwnProperty(r)&&o.push({type:"city",title:a[r].city});for(var r in i)i.hasOwnProperty(r)&&o.push({type:"state",title:i[r].state});for(var r in s)s.hasOwnProperty(r)&&o.push({type:"country",title:s[r].country});asl_locator.add_prop_search(o,t)}not_initial_load||((t=$(".asl-p-cont #auto-complete-search,.asl-p-cont .asl-search-address")).after('<button class="asl-search-clr asl-clear-btn hide" type="button"><svg width="12" height="12" viewBox="0 0 12 12" xmlns="https://www.w3.org/2000/svg"><path d="M.566 1.698L0 1.13 1.132 0l.565.566L6 4.868 10.302.566 10.868 0 12 1.132l-.566.565L7.132 6l4.302 4.3.566.568L10.868 12l-.565-.566L6 7.132l-4.3 4.302L1.13 12 0 10.868l.566-.565L4.868 6 .566 1.698z"></path></svg></button>'),t.next().bind("click",function(e){asl_view._location=null,asl_view.reset_measure(t),asl_view._panel.stores_changed(),$(this).addClass("hide")}));var l=x.stores_,c=l[0]?l[0].props_.country:null;x.countries=!1;for(var _=0;_<l.length;_++)if(c!=l[_].props_.country){x.countries=!0;break}if(x.stateCities=x.countries?x.getCountriesStateCities(l):x.getStateCities(l),!not_initial_load){if(not_initial_load=!0,asl_view=new asl_locator.View(map,x,{geolocation:!1,features:x.getDSFeatures()}),asl_panel=new asl_locator.Panel(document.getElementById("asl-list"),{view:asl_view}),asl_view.load_complete(),window.asl_view=asl_view,asl_configuration.smooth_pan){function d(){asl_view.map_w=$(map.getDiv()).width(),asl_view.map_h=$(map.getDiv()).height()}asl_view._overlay=new google.maps.OverlayView,asl_view._overlay.draw=function(){},asl_view._overlay.setMap(map),$(window).resize(d),d()}var p=jQuery(".asl-p-cont #asl-geolocation-agile-modal");function g(e){asl_view.measure_distance(e.geometry.location,!0,null,e),p.removeClass("in").css("display","none"),asl_configuration.analytics}if(p.find(".close").bind("click",function(e){p.removeClass("in"),window.setTimeout(function(){p.css("display","none")},300)}),"3"==asl_configuration.prompt_location?asl_view.geolocate_():"0"!=asl_configuration.prompt_location&&(p.css("display","block"),window.setTimeout(function(){p.addClass("in")},300),$(".asl-p-cont #asl-btn-geolocation").bind("click",function(){asl_view.geolocate_(),p.removeClass("in").css("display","none")})),"2"==asl_configuration.prompt_location){var u=null,f=new google.maps.Geocoder,h=h||function(e,t){"OK"==t?g(e[0]):console.log("Geocode was not successful for the following reason: "+t)};$("#asl-current-loc").bind("keyup",function(e){if(13==e.keyCode){var t=$.trim(this.value);t&&f.geocode({address:t},h)}}),$("#asl-btn-locate").click(function(e){if(u)g(u);else{var t=$.trim($("#asl-current-loc").val());t&&f.geocode({address:t},h)}});var m=$(".asl-p-cont #asl-current-loc")[0],v={};asl_configuration.google_search_type&&(v.types=["("+asl_configuration.google_search_type+")"]),asl_configuration.country_restrict&&(v.componentRestrictions={country:asl_configuration.country_restrict.toLowerCase()});var y=new google.maps.places.Autocomplete(m,v),w=["geometry"];asl_configuration.filter_result&&w.push("address_components"),y.setFields(w),google.maps.event.addListener(y,"place_changed",function(){var e=this.getPlace();u=e})}$(".asl-p-cont .asl-geo.icon-direction-outline").bind("click",function(e){asl_view.geolocate_()}),asl_configuration.user_center&&asl_view.measure_distance(new google.maps.LatLng(asl_configuration.default_lat,asl_configuration.default_lng))}"1"!=asl_configuration.load_all&&asl_view.dest_coords&&asl_view.measure_distance(asl_view.dest_coords,null,!0),asl_configuration.first_load&&"1"!=asl_configuration.first_load||asl_view.refreshView(!0),$(".asl-p-cont .asl-overlay").hide(),b&&map.panTo(b),x.on_call=!1},error:function(){x.on_call=!1},dataType:"json"}),x.pos=i},asl_engine.dataSource.prototype.load_locator=function(){var that=this;if(!document.getElementById("asl-map-canv"))return!1;var maps_params={center:new google.maps.LatLng(asl_lat,asl_lng),zoom:parseInt(asl_configuration.zoom),scrollwheel:asl_configuration.scroll_wheel,gestureHandling:asl_configuration.gesture_handling||"cooperative",mapTypeId:asl_configuration.map_type};if("false"==asl_configuration.zoomcontrol&&(maps_params.zoomControl=!1),"false"==asl_configuration.maptypecontrol&&(maps_params.mapTypeControl=!1),"false"==asl_configuration.scalecontrol&&(maps_params.scaleControl=!1),"false"==asl_configuration.rotatecontrol&&(maps_params.rotateControl=!1),"false"==asl_configuration.fullscreencontrol&&(maps_params.fullscreenControl=!1),"false"==asl_configuration.streetviewcontrol&&(maps_params.streetViewControl=!1),maps_params.fullscreenControlOptions={position:google.maps.ControlPosition.RIGHT_CENTER},asl_configuration.maxzoom&&!isNaN(asl_configuration.maxzoom)&&(maps_params.maxZoom=parseInt(asl_configuration.maxzoom)),asl_configuration.minzoom&&!isNaN(asl_configuration.minzoom)&&(maps_params.minZoom=parseInt(asl_configuration.minzoom)),map=new google.maps.Map(document.getElementById("asl-map-canv"),maps_params),window.asl_map=map,asl_configuration.reset_button=!0,asl_configuration.reset_button){var $reset_btn=null;function ASLResetMAP(e,t){$reset_btn=$('<span class="asl-reset-map" style="display:none">'+asl_configuration.words.reset_map+"</span>"),e.appendChild($reset_btn[0]),$reset_btn[0].addEventListener("click",function(){if(t.panTo(new google.maps.LatLng(asl_lat,asl_lng)),t.setZoom(parseInt(asl_configuration.zoom)),$reset_btn[0].style.display="none",asl_view._panel.$category_ddl){var e=asl_view._panel.$category_ddl.val();e&&0<e.length&&asl_view._panel.$category_ddl.multiselect("deselect",asl_view._panel.$category_ddl.val(),!0)}})}var centerControlDiv=document.createElement("div"),centerControl=new ASLResetMAP(centerControlDiv,map);centerControlDiv.index=1,map.controls[google.maps.ControlPosition.LEFT].push(centerControlDiv)}if(asl_configuration.map_layout){var map_style=eval("("+asl_configuration.map_layout+")");map.set("styles",map_style)}window._asl_map_customize&&(_asl_map_customize=JSON.parse(_asl_map_customize),_asl_map_customize.trafic_layer&&1==_asl_map_customize.trafic_layer&&(trafic_layer=new google.maps.TrafficLayer,trafic_layer.setMap(map)),_asl_map_customize.bike_layer&&1==_asl_map_customize.bike_layer&&(bike_layer=new google.maps.BicyclingLayer,bike_layer.setMap(map)),_asl_map_customize.transit_layer&&1==_asl_map_customize.transit_layer&&(transit_layer=new google.maps.TransitLayer,transit_layer.setMap(map)),_asl_map_customize.drawing&&asl_drawing.loadData(_asl_map_customize.drawing,map));var _features=[];for(var i in asl_categories){var cat=asl_categories[i];that.FEATURES_.add(new asl_locator.Feature(cat.id,cat.name,cat.icon,cat.ordr&&!isNaN(cat.ordr)?parseInt(cat.ordr):0))}if("1"==asl_configuration.load_all)that.fetch_remote_data();else if("2"==asl_configuration.load_all){var $reload_btn=null,_set_position=null,first_loaded=!1;function ASLReloadMAP(e,t){$reload_btn=$('<span class="asl-reload-map" display="none"><i class="icon-arrows-cw"></i>'+asl_configuration.words.reload_map+"</span>"),e.appendChild($reload_btn[0]),$reload_btn[0].addEventListener("click",function(){$reload_btn.find("i").addClass("animate-spin"),that.fetch_remote_data(_set_position)})}var centerControlDiv=document.createElement("div"),centerControl=new ASLReloadMAP(centerControlDiv,map);centerControlDiv.index=1,map.controls[google.maps.ControlPosition.TOP_CENTER].push(centerControlDiv),google.maps.event.addListener(map,"idle",function(){asl_view&&asl_view.marker_clicked&&(_set_position=asl_view.marker_center,asl_view.marker_clicked=!1),$reload_btn[0].style.display="block",first_loaded||(first_loaded=!0,that.fetch_remote_data())})}else google.maps.event.addListener(map,"idle",function(){var e=null;if(asl_view&&asl_view.marker_clicked)return e=asl_view.marker_center,void(asl_view.marker_clicked=!1);that.fetch_remote_data(e)})},asl_engine.dataSource.prototype.FEATURES_=new asl_locator.FeatureSet,asl_engine.dataSource.prototype.getDSFeatures=function(){return this.FEATURES_},asl_engine.dataSource.prototype.parseData=function(e){var t=[],m=asl_date.getHours()+asl_date.getMinutes()/100,v=asl_date.getDay(),o=asl_categories;asl_categories={};var a=Object.keys(o);for(var i in a)"object"==typeof o[a[i]]&&(asl_categories[String(a[i])]=o[a[i]],asl_categories[a[i]].len=0);var y=["mon","tue","wed","thu","fri","sat","sun"];v={1:"mon",2:"tue",3:"wed",4:"thu",5:"fri",6:"sat",0:"sun"}[v];function s(e){if(e.open_hours){e.open=!1,e.open_hours=JSON.parse(e.open_hours);var t=[];for(var o in y){var a=y[o],i=e.open_hours[a],s=a==v;if("1"==i)s&&(e.open=!0);else if("0"==i)s&&(e.open=!1);else if(i){var n=[];for(var r in i)if(i.hasOwnProperty(r)){var l=i[r].split(" - "),c=l[0],_=l[1],d=0!=c?asl_engine.helper.asl_timeConvert(c):0,p=0!=_?asl_engine.helper.asl_timeConvert(_):24;if(0==p&&(p=24),!e.open&&s&&(e.open=!(!c||!_)&&asl_engine.helper.between(m,d,p)),asl_configuration.time_24){d+=.01,d=parseFloat(d).toFixed(2);var g=String(d).split(".");g[0]=asl_engine.helper.asl_leadzero(parseInt(g[0])),g[1]=asl_engine.helper.asl_leadzero(parseInt(g[1])-1),c=g.join(":"),p+=.01,p=parseFloat(p).toFixed(2);var u=String(p).split(".");u[0]=asl_engine.helper.asl_leadzero(parseInt(u[0])),u[1]=asl_engine.helper.asl_leadzero(parseInt(u[1])-1),_=u.join(":")}else{var f=c.split(":"),h=_.split(":");f[0]&&(f[0]=asl_engine.helper.asl_leadzero(parseInt(f[0]))),c=f.join(":"),h[0]&&(h[0]=asl_engine.helper.asl_leadzero(parseInt(h[0]))),_=h.join(":")}n.push("<span>"+c+" - "+_+"</span>"),s&&(e.start_time=c,e.end_time=_)}t.push('<span><span class="asl-day-lbl">'+asl_configuration.days[a]+':</span><span class="asl-time-hrs">'+n.join("")+"</span></span>")}}e.open_hours=0<t.length?'<span class="asl-week-hrs">'+t.join("")+"</span>":null}else e.open=!0}function n(e){if(e.open_hours){e.open=!1,e.open_hours=JSON.parse(e.open_hours);var t=e.open_hours[v];if(e.open_hours=null,"1"==t)e.open=!0;else if("0"==t)e.open=!1;else if(t){for(var o in e.open_hours=[],t)if(t.hasOwnProperty(o)){var a=t[o].split(" - ");e.start_time=a[0],e.end_time=a[1];var i=0!=e.start_time?asl_engine.helper.asl_timeConvert(e.start_time):0,s=0!=e.end_time?asl_engine.helper.asl_timeConvert(e.end_time):24;if(0==s&&(s=24),e.open||(e.open=!(!e.start_time||!e.end_time)&&asl_engine.helper.between(m,i,s)),asl_configuration.time_24){i+=.01,i=parseFloat(i).toFixed(2);var n=String(i).split(".");n[0]=asl_engine.helper.asl_leadzero(parseInt(n[0])),n[1]=asl_engine.helper.asl_leadzero(parseInt(n[1])-1),e.start_time=n.join(":"),s+=.01,s=parseFloat(s).toFixed(2);var r=String(s).split(".");r[0]=asl_engine.helper.asl_leadzero(parseInt(r[0])),r[1]=asl_engine.helper.asl_leadzero(parseInt(r[1])-1),e.end_time=r.join(":")}else{var l=e.start_time.split(":"),c=e.end_time.split(":");l[0]&&(l[0]=asl_engine.helper.asl_leadzero(parseInt(l[0]))),e.start_time=l.join(":"),c[0]&&(c[0]=asl_engine.helper.asl_leadzero(parseInt(c[0]))),e.end_time=c.join(":")}e.open_hours.push(e.start_time+" - "+e.end_time)}e.open_hours=0<e.open_hours.length?e.open_hours.join(" <br> "):null}}else e.open=!0}for(var r=asl_configuration.show_categories||asl_configuration.category_accordion,l=0;l<e.length;l++){var c=e[l];c.id=parseInt(c.id),c.ordr=!c.ordr||isNaN(c.ordr)?0:parseInt(c.ordr),c.lat=parseFloat(c.lat),c.lng=parseFloat(c.lng),c.logo_id=c.logo_id&&!isNaN(c.logo_id)?parseInt(c.logo_id):c.logo_id;var _=new google.maps.LatLng(c.lat,c.lng);c.open_hours=c.open_hours?c.open_hours:null,c.state||(c.state="");var d=asl_engine.helper.implode([c.city,c.state,c.postal_code],", "),p=[c.street,d];c.address=asl_engine.helper.implode(p,"<br>");var g=c.categories?c.categories.split(","):[],u=[];if(r){var f=[],h=[];for(var w in g){var b=g[w].toString();asl_categories[b]?(asl_categories[b].len++,u.push(asl_categories[b]),f.push(asl_categories[b].name),h.push(asl_categories[b].id)):delete g[w]}c.cat=f&&f[0]?f[0]:"",c.c_ids=h,c.c_names=asl_engine.helper.implode(f,", "),c.categories=u}var x=["brand"];for(var C in x){var k=x[C],L=c[k]?c[k].split(","):[];c[k]=L;var S=[];for(var P in L)asl_attributes[k][L[P]]&&S.push(asl_attributes[k][L[P]].name);S.length&&(c["str_"+k]=S.join(", "))}c.city=$.trim(c.city),c.country=$.trim(c.country),c.state||(c.state=""),asl_configuration.additional_info||(c.description_2=null),c.marker_id=c.marker_id?c.marker_id.toString():"",asl_configuration.week_hours?s(c):n(c);var I=new asl_locator.Store(c.id,_,g,c);t.push(I)}return t};var data_source=new asl_engine.dataSource;data_source.getStores=function(e,t,o,a){for(var i,s=[],n=0;i=this.stores_[n];n++)i.hasAnyCategory(t)&&s.push(i);o(s)},asl_configuration.ajax_load?window.asl_data_source=data_source:data_source.load_locator()}}(jQuery,asl_underscore)}function InfoBox(e){e=e||{},google.maps.OverlayView.apply(this,arguments),this.content_=e.content||"",this.disableAutoPan_=e.disableAutoPan||!1,this.maxWidth_=e.maxWidth||0,this.pixelOffset_=e.pixelOffset||new google.maps.Size(0,0),this.position_=e.position||new google.maps.LatLng(0,0),this.zIndex_=e.zIndex||null,this.boxClass_=e.boxClass||"infoBox",this.boxStyle_=e.boxStyle||{},this.closeBoxMargin_=e.closeBoxMargin||"2px",this.closeBoxURL_=e.closeBoxURL||"https://www.google.com/intl/en_us/mapfiles/close.gif",""===e.closeBoxURL&&(this.closeBoxURL_=""),this.infoBoxClearance_=e.infoBoxClearance||new google.maps.Size(1,1),void 0===e.visible&&(void 0===e.isHidden?e.visible=!0:e.visible=!e.isHidden),this.isHidden_=!e.visible,this.alignBottom_=e.alignBottom||!1,this.pane_=e.pane||"floatPane",this.enableEventPropagation_=e.enableEventPropagation||!1,this.div_=null,this.closeListener_=null,this.moveListener_=null,this.contextListener_=null,this.eventListeners_=null,this.fixedWidthSet_=null}function _isMobileDevice(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t}});